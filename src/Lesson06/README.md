[« На главную](../../README.md)

---

## Генерация адаптеров по интерфейсу

### Цель:
В рамках данного ДЗ Вы научитесь генерировать адаптеры для интерфейсов, полученных при применении принципа DIP.
ДЗ демонстрирует применение метапрограммирования для решения рутинных задач, а также возможности Reflection и компиляции "на лету" современных языков программирования.
Если задание выполняется на C++, то задание заключается в написании препроцессора, который ищет абстрактные классы и по ним генерирует код адаптера, который включается в состав проекта.
Для удобства такой препроцессор стоит запускать на этапе, предшествующем компиляции в процессе сборки, а также стоит подумать об удалении всех сгенерированных файлов при выполнении команды clear.

### Описание/Пошаговая инструкция выполнения домашнего задания:
Предположим, что у нас есть интерфейс
```
interface Spaceship.Operations.IMovable
{
    Vector getPosition();
    Vector setPosition(Vector newValue);
    Vector getVelocity();
}
```

1. Необходимо по нему сгенерировать следующий класс:
```
class AutoGenerated.MovableAdapter: Spaceship.Operations.IMovable
{
    UObject obj;
    public MovableAdapter(UObject obj)
    {
        this.obj = obj;
    }
    public Vector getPosition()
    {
        return IoC.Resolve("Spaceship.Operations.IMovable:position.get", obj);
    }
    public Vector getVelocity()
    {
        return IoC.Resolve("Spaceship.Operations.IMovable:velocity.get", obj);
    }
    public Vector setPosition(Vector newValue)
    {
        return IoC.Resolve("Spaceship.Operations.IMovable:position.set", obj, newValue);
    }
}
```
Так, чтобы можно было создавать экземпляры этого класса.

2. Экземпляры генерируемых оберток для объекта obj можно создавать следующей строкой:
```
var adapter = IoC.Resolve("Adapter", typeof(IMovable), obj);
```

3. Необязательная задача на подумать: если интерфейсе потребуются какие-либо методы, например, как
```
interface Spaceship.Operations.IMovable
{
    Vector getPosition();
    Vector setPosition(Vector newValue);
    Vector getVelocity();
    void finish();
}
```
Придумать реализацию адаптера для подобных методов.

### Критерии оценки:
- Задание сдано на проверку - 1 балл
- Реализован генератор адаптеров - 3 балла
- Реализованы тесты на генератор адаптеров - 2 балл
- Определена стратегия для IoC из п. 2 задания - 2 балла
- Обработан случай из п. 3 задания - 2 балла
